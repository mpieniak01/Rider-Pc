# ---------------------------------------------------------------------------
# Rider-Pi / config/voice_gemini_file.toml
# Google Gemini (ASR + Chat + TTS) – tryb plikowy
# Uwaga: walidator wymaga playback.backend = "aplay"
# ---------------------------------------------------------------------------

[capture]
device        = "wm8960_in"
sample_rate   = 16000
channels      = 1
sample_format = "S16_LE"

[playback]
backend = "aplay"         # wymagane przez walidator
device  = "wm8960_out"    # KLUCZOWE: omijamy 'default', gramy przez alias ALSA
volume  = 55

[asr]
backend  = "google"
model    = "gemini-2.5-flash"
language = "pl"

[chat]
backend       = "google"
model         = "gemini-2.5-flash"
language      = "pl"
system_prompt = "Jesteś asystentem głosowym Rider-Pi. Odpowiadaj krótko po polsku."

[tts]
backend = "google"
model   = "gemini-2.5-flash-preview-tts"
voice   = "Kore"
format  = "wav"                 # zwijamy do WAV i gramy przez aplay

[nlu]
backend        = "passthrough"  # dozwolone: dummy | openai | passthrough
chat_threshold = 0.65
llm_model      = "gemini-2.5-flash"

[nlu.command_keywords]
stop        = ["stop", "pauza", "koniec", "cisza"]
repeat      = ["powtórz", "jeszcze raz"]
volume_up   = ["głośniej", "podgłośnij", "+10"]
volume_down = ["ciszej", "ścisz", "-10"]

[hotword]
enabled = true
engine  = "ptt"

[ptt]
silence_ms     = 1500
commit_on_stop = true

[vad]
mode             = 2
frame_ms         = 20
tail_ms          = 220
energy_gate_dbfs = -27.0
max_len_ms       = 5000

[service]
beep                 = false
pre_speech_wait_ms   = 250
mic_open_delay_ms    = 30
post_tts_mute_ms     = 200
min_capture_ms       = 350
no_speech_timeout_ms = 1600
recordings_dir       = "/tmp/voice-recs"
